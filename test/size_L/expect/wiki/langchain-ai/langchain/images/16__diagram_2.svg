<svg aria-roledescription="class" class="classDiagram" id="mermaid-kzihidqxqn" preserveAspectRatio="xMidYMid meet" preserveaspectratio="xMidYMid meet" role="graphics-document document" viewBox="0 0 1484.765625 498" width="100%" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
 <style>
  #mermaid-kzihidqxqn{font-family:ui-sans-serif,-apple-system,system-ui,Segoe UI,Helvetica;font-size:16px;fill:#333;}@keyframes edge-animation-frame{from{stroke-dashoffset:0;}}@keyframes dash{to{stroke-dashoffset:0;}}#mermaid-kzihidqxqn .edge-animation-slow{stroke-dasharray:9,5!important;stroke-dashoffset:900;animation:dash 50s linear infinite;stroke-linecap:round;}#mermaid-kzihidqxqn .edge-animation-fast{stroke-dasharray:9,5!important;stroke-dashoffset:900;animation:dash 20s linear infinite;stroke-linecap:round;}#mermaid-kzihidqxqn .error-icon{fill:#dddddd;}#mermaid-kzihidqxqn .error-text{fill:#222222;stroke:#222222;}#mermaid-kzihidqxqn .edge-thickness-normal{stroke-width:1px;}#mermaid-kzihidqxqn .edge-thickness-thick{stroke-width:3.5px;}#mermaid-kzihidqxqn .edge-pattern-solid{stroke-dasharray:0;}#mermaid-kzihidqxqn .edge-thickness-invisible{stroke-width:0;fill:none;}#mermaid-kzihidqxqn .edge-pattern-dashed{stroke-dasharray:3;}#mermaid-kzihidqxqn .edge-pattern-dotted{stroke-dasharray:2;}#mermaid-kzihidqxqn .marker{fill:#999;stroke:#999;}#mermaid-kzihidqxqn .marker.cross{stroke:#999;}#mermaid-kzihidqxqn svg{font-family:ui-sans-serif,-apple-system,system-ui,Segoe UI,Helvetica;font-size:16px;}#mermaid-kzihidqxqn p{margin:0;}#mermaid-kzihidqxqn g.classGroup text{fill:#dddddd;stroke:none;font-family:ui-sans-serif,-apple-system,system-ui,Segoe UI,Helvetica;font-size:10px;}#mermaid-kzihidqxqn g.classGroup text .title{font-weight:bolder;}#mermaid-kzihidqxqn .nodeLabel,#mermaid-kzihidqxqn .edgeLabel{color:#333333;}#mermaid-kzihidqxqn .edgeLabel .label rect{fill:#ffffff;}#mermaid-kzihidqxqn .label text{fill:#333333;}#mermaid-kzihidqxqn .labelBkg{background:#ffffff;}#mermaid-kzihidqxqn .edgeLabel .label span{background:#ffffff;}#mermaid-kzihidqxqn .classTitle{font-weight:bolder;}#mermaid-kzihidqxqn .node rect,#mermaid-kzihidqxqn .node circle,#mermaid-kzihidqxqn .node ellipse,#mermaid-kzihidqxqn .node polygon,#mermaid-kzihidqxqn .node path{fill:#ffffff;stroke:#dddddd;stroke-width:1px;}#mermaid-kzihidqxqn .divider{stroke:#dddddd;stroke-width:1;}#mermaid-kzihidqxqn g.clickable{cursor:pointer;}#mermaid-kzihidqxqn g.classGroup rect{fill:#ffffff;stroke:#dddddd;}#mermaid-kzihidqxqn g.classGroup line{stroke:#dddddd;stroke-width:1;}#mermaid-kzihidqxqn .classLabel .box{stroke:none;stroke-width:0;fill:#ffffff;opacity:0.5;}#mermaid-kzihidqxqn .classLabel .label{fill:#dddddd;font-size:10px;}#mermaid-kzihidqxqn .relation{stroke:#999;stroke-width:1;fill:none;}#mermaid-kzihidqxqn .dashed-line{stroke-dasharray:3;}#mermaid-kzihidqxqn .dotted-line{stroke-dasharray:1 2;}#mermaid-kzihidqxqn #compositionStart,#mermaid-kzihidqxqn .composition{fill:#999!important;stroke:#999!important;stroke-width:1;}#mermaid-kzihidqxqn #compositionEnd,#mermaid-kzihidqxqn .composition{fill:#999!important;stroke:#999!important;stroke-width:1;}#mermaid-kzihidqxqn #dependencyStart,#mermaid-kzihidqxqn .dependency{fill:#999!important;stroke:#999!important;stroke-width:1;}#mermaid-kzihidqxqn #dependencyStart,#mermaid-kzihidqxqn .dependency{fill:#999!important;stroke:#999!important;stroke-width:1;}#mermaid-kzihidqxqn #extensionStart,#mermaid-kzihidqxqn .extension{fill:transparent!important;stroke:#999!important;stroke-width:1;}#mermaid-kzihidqxqn #extensionEnd,#mermaid-kzihidqxqn .extension{fill:transparent!important;stroke:#999!important;stroke-width:1;}#mermaid-kzihidqxqn #aggregationStart,#mermaid-kzihidqxqn .aggregation{fill:transparent!important;stroke:#999!important;stroke-width:1;}#mermaid-kzihidqxqn #aggregationEnd,#mermaid-kzihidqxqn .aggregation{fill:transparent!important;stroke:#999!important;stroke-width:1;}#mermaid-kzihidqxqn #lollipopStart,#mermaid-kzihidqxqn .lollipop{fill:#ffffff!important;stroke:#999!important;stroke-width:1;}#mermaid-kzihidqxqn #lollipopEnd,#mermaid-kzihidqxqn .lollipop{fill:#ffffff!important;stroke:#999!important;stroke-width:1;}#mermaid-kzihidqxqn .edgeTerminals{font-size:11px;line-height:initial;}#mermaid-kzihidqxqn .classTitleText{text-anchor:middle;font-size:18px;fill:#333;}#mermaid-kzihidqxqn :root{--mermaid-font-family:"trebuchet ms",verdana,arial,sans-serif;}
 </style>
 <g>
  <defs>
   <marker class="marker aggregation class" id="mermaid-kzihidqxqn_class-aggregationStart" markerheight="240" markerwidth="190" orient="auto" refx="18" refy="7">
    <path d="M 18,7 L9,13 L1,7 L9,1 Z"/>
   </marker>
  </defs>
  <defs>
   <marker class="marker aggregation class" id="mermaid-kzihidqxqn_class-aggregationEnd" markerheight="28" markerwidth="20" orient="auto" refx="1" refy="7">
    <path d="M 18,7 L9,13 L1,7 L9,1 Z"/>
   </marker>
  </defs>
  <defs>
   <marker class="marker extension class" id="mermaid-kzihidqxqn_class-extensionStart" markerheight="240" markerwidth="190" orient="auto" refx="18" refy="7">
    <path d="M 1,7 L18,13 V 1 Z"/>
   </marker>
  </defs>
  <defs>
   <marker class="marker extension class" id="mermaid-kzihidqxqn_class-extensionEnd" markerheight="28" markerwidth="20" orient="auto" refx="1" refy="7">
    <path d="M 1,1 V 13 L18,7 Z"/>
   </marker>
  </defs>
  <defs>
   <marker class="marker composition class" id="mermaid-kzihidqxqn_class-compositionStart" markerheight="240" markerwidth="190" orient="auto" refx="18" refy="7">
    <path d="M 18,7 L9,13 L1,7 L9,1 Z"/>
   </marker>
  </defs>
  <defs>
   <marker class="marker composition class" id="mermaid-kzihidqxqn_class-compositionEnd" markerheight="28" markerwidth="20" orient="auto" refx="1" refy="7">
    <path d="M 18,7 L9,13 L1,7 L9,1 Z"/>
   </marker>
  </defs>
  <defs>
   <marker class="marker dependency class" id="mermaid-kzihidqxqn_class-dependencyStart" markerheight="240" markerwidth="190" orient="auto" refx="6" refy="7">
    <path d="M 5,7 L9,13 L1,7 L9,1 Z"/>
   </marker>
  </defs>
  <defs>
   <marker class="marker dependency class" id="mermaid-kzihidqxqn_class-dependencyEnd" markerheight="28" markerwidth="20" orient="auto" refx="13" refy="7">
    <path d="M 18,7 L9,13 L14,7 L9,1 Z"/>
   </marker>
  </defs>
  <defs>
   <marker class="marker lollipop class" id="mermaid-kzihidqxqn_class-lollipopStart" markerheight="240" markerwidth="190" orient="auto" refx="13" refy="7">
    <circle cx="7" cy="7" fill="transparent" r="6" stroke="black"/>
   </marker>
  </defs>
  <defs>
   <marker class="marker lollipop class" id="mermaid-kzihidqxqn_class-lollipopEnd" markerheight="240" markerwidth="190" orient="auto" refx="1" refy="7">
    <circle cx="7" cy="7" fill="transparent" r="6" stroke="black"/>
   </marker>
  </defs>
  <g class="root">
   <g class="clusters"/>
   <g class="edgePaths">
    <path class="edge-thickness-normal edge-pattern-solid relation" d="M439.981,226.585L404.09,238.321C368.198,250.057,296.416,273.528,260.524,289.431C224.633,305.333,224.633,313.667,224.633,317.833L224.633,322" id="id_AgentMiddleware_HumanInTheLoopMiddleware_1" marker-start="url(#mermaid-kzihidqxqn_class-extensionStart)" style=";"/>
    <path class="edge-thickness-normal edge-pattern-solid relation" d="M704.781,290L704.781,291.167C704.781,292.333,704.781,294.667,704.781,300C704.781,305.333,704.781,313.667,704.781,317.833L704.781,322" id="id_AgentMiddleware_SummarizationMiddleware_2" marker-start="url(#mermaid-kzihidqxqn_class-extensionStart)" style=";"/>
    <path class="edge-thickness-normal edge-pattern-solid relation" d="M969.698,220.332L1011.837,233.11C1053.976,245.888,1138.254,271.444,1180.392,288.389C1222.531,305.333,1222.531,313.667,1222.531,317.833L1222.531,322" id="id_AgentMiddleware_AnthropicPromptCachingMiddleware_3" marker-start="url(#mermaid-kzihidqxqn_class-extensionStart)" style=";"/>
   </g>
   <g class="edgeLabels">
    <g class="edgeLabel">
     <g class="label" transform="translate(0, -12)">
      <foreignObject height="24" width="100%">
       <div class="labelBkg" style="color: #202020 !important; font-family: Arial, Helvetica, sans-serif !important; font-size: 14px !important; background-color: transparent !important; visibility: visible !important; opacity: 1 !important; display: inline !important; margin: 0 !important; padding: 0 !important; border: none !important;" xmlns="http://www.w3.org/1999/xhtml">
        <span class="edgeLabel" style="color: #202020 !important; font-family: Arial, Helvetica, sans-serif !important; font-size: 14px !important; background-color: transparent !important; visibility: visible !important; opacity: 1 !important; display: inline !important; margin: 0 !important; padding: 0 !important; border: none !important;"/>
       </div>
      </foreignObject>
     </g>
    </g>
    <g class="edgeLabel">
     <g class="label" transform="translate(0, -12)">
      <foreignObject height="24" width="100%">
       <div class="labelBkg" style="color: #202020 !important; font-family: Arial, Helvetica, sans-serif !important; font-size: 14px !important; background-color: transparent !important; visibility: visible !important; opacity: 1 !important; display: inline !important; margin: 0 !important; padding: 0 !important; border: none !important;" xmlns="http://www.w3.org/1999/xhtml">
        <span class="edgeLabel" style="color: #202020 !important; font-family: Arial, Helvetica, sans-serif !important; font-size: 14px !important; background-color: transparent !important; visibility: visible !important; opacity: 1 !important; display: inline !important; margin: 0 !important; padding: 0 !important; border: none !important;"/>
       </div>
      </foreignObject>
     </g>
    </g>
    <g class="edgeLabel">
     <g class="label" transform="translate(0, -12)">
      <foreignObject height="24" width="100%">
       <div class="labelBkg" style="color: #202020 !important; font-family: Arial, Helvetica, sans-serif !important; font-size: 14px !important; background-color: transparent !important; visibility: visible !important; opacity: 1 !important; display: inline !important; margin: 0 !important; padding: 0 !important; border: none !important;" xmlns="http://www.w3.org/1999/xhtml">
        <span class="edgeLabel" style="color: #202020 !important; font-family: Arial, Helvetica, sans-serif !important; font-size: 14px !important; background-color: transparent !important; visibility: visible !important; opacity: 1 !important; display: inline !important; margin: 0 !important; padding: 0 !important; border: none !important;"/>
       </div>
      </foreignObject>
     </g>
    </g>
   </g>
   <g class="nodes">
    <g class="node default" id="classId-AgentMiddleware-0" transform="translate(704.78125, 140)">
     <g class="basic label-container">
      <path d="M-247.69140625 -132 L247.69140625 -132 L247.69140625 132 L-247.69140625 132" fill="#ffffff" stroke="none" stroke-width="0" style=""/>
      <path d="M-247.69140625 -132 C-91.55694729083643 -132, 64.57751166832713 -132, 247.69140625 -132 M-247.69140625 -132 C-65.05069949378878 -132, 117.59000726242243 -132, 247.69140625 -132 M247.69140625 -132 C247.69140625 -67.8017106062429, 247.69140625 -3.603421212485813, 247.69140625 132 M247.69140625 -132 C247.69140625 -26.42271203663998, 247.69140625 79.15457592672004, 247.69140625 132 M247.69140625 132 C54.38974601234588 132, -138.91191422530824 132, -247.69140625 132 M247.69140625 132 C127.05158680891303 132, 6.411767367826059 132, -247.69140625 132 M-247.69140625 132 C-247.69140625 68.65960764537103, -247.69140625 5.319215290742051, -247.69140625 -132 M-247.69140625 132 C-247.69140625 35.95186514918312, -247.69140625 -60.09626970163376, -247.69140625 -132" fill="none" stroke="#dddddd" stroke-width="1.3" style=""/>
     </g>
     <g class="annotation-group text" transform="translate(0, -108)"/>
     <g class="label-group text" transform="translate(-79.3515625, -108)">
      <g class="label" style="font-weight: bolder" transform="translate(0,-12)">
       <foreignObject height="24" width="158.703125">
        <div style="color: #202020 !important; font-family: Arial, Helvetica, sans-serif !important; font-size: 14px !important; background-color: transparent !important; visibility: visible !important; opacity: 1 !important; display: inline !important; margin: 0 !important; padding: 0 !important; border: none !important;" xmlns="http://www.w3.org/1999/xhtml">
         <span class="nodeLabel markdown-node-label" style="color: #202020 !important; font-family: Arial, Helvetica, sans-serif !important; font-size: 14px !important; background-color: transparent !important; visibility: visible !important; opacity: 1 !important; display: inline !important; margin: 0 !important; padding: 0 !important; border: none !important;">
          <p style="color: #202020 !important; font-family: Arial, Helvetica, sans-serif !important; font-size: 14px !important; background-color: transparent !important; visibility: visible !important; opacity: 1 !important; display: inline !important; margin: 0 !important; padding: 0 !important; border: none !important;">
           AgentMiddleware
          </p>
         </span>
        </div>
       </foreignObject>
      </g>
     </g>
     <g class="members-group text" transform="translate(-235.69140625, -60)">
      <g class="label" style="" transform="translate(0,-12)">
       <foreignObject height="24" width="235.28125">
        <div style="color: #202020 !important; font-family: Arial, Helvetica, sans-serif !important; font-size: 14px !important; background-color: transparent !important; visibility: visible !important; opacity: 1 !important; display: inline !important; margin: 0 !important; padding: 0 !important; border: none !important;" xmlns="http://www.w3.org/1999/xhtml">
         <span class="nodeLabel markdown-node-label" style="color: #202020 !important; font-family: Arial, Helvetica, sans-serif !important; font-size: 14px !important; background-color: transparent !important; visibility: visible !important; opacity: 1 !important; display: inline !important; margin: 0 !important; padding: 0 !important; border: none !important;">
          <p style="color: #202020 !important; font-family: Arial, Helvetica, sans-serif !important; font-size: 14px !important; background-color: transparent !important; visibility: visible !important; opacity: 1 !important; display: inline !important; margin: 0 !important; padding: 0 !important; border: none !important;">
           +state_schema: type[StateT]
          </p>
         </span>
        </div>
       </foreignObject>
      </g>
      <g class="label" style="" transform="translate(0,12)">
       <foreignObject height="24" width="168.546875">
        <div style="color: #202020 !important; font-family: Arial, Helvetica, sans-serif !important; font-size: 14px !important; background-color: transparent !important; visibility: visible !important; opacity: 1 !important; display: inline !important; margin: 0 !important; padding: 0 !important; border: none !important;" xmlns="http://www.w3.org/1999/xhtml">
         <span class="nodeLabel markdown-node-label" style="color: #202020 !important; font-family: Arial, Helvetica, sans-serif !important; font-size: 14px !important; background-color: transparent !important; visibility: visible !important; opacity: 1 !important; display: inline !important; margin: 0 !important; padding: 0 !important; border: none !important;">
          <p style="color: #202020 !important; font-family: Arial, Helvetica, sans-serif !important; font-size: 14px !important; background-color: transparent !important; visibility: visible !important; opacity: 1 !important; display: inline !important; margin: 0 !important; padding: 0 !important; border: none !important;">
           +tools: list[BaseTool]
          </p>
         </span>
        </div>
       </foreignObject>
      </g>
      <g class="label" style="" transform="translate(0,36)">
       <foreignObject height="24" width="299.015625">
        <div style="color: #202020 !important; font-family: Arial, Helvetica, sans-serif !important; font-size: 14px !important; background-color: transparent !important; visibility: visible !important; opacity: 1 !important; display: inline !important; margin: 0 !important; padding: 0 !important; border: none !important;" xmlns="http://www.w3.org/1999/xhtml">
         <span class="nodeLabel markdown-node-label" style="color: #202020 !important; font-family: Arial, Helvetica, sans-serif !important; font-size: 14px !important; background-color: transparent !important; visibility: visible !important; opacity: 1 !important; display: inline !important; margin: 0 !important; padding: 0 !important; border: none !important;">
          <p style="color: #202020 !important; font-family: Arial, Helvetica, sans-serif !important; font-size: 14px !important; background-color: transparent !important; visibility: visible !important; opacity: 1 !important; display: inline !important; margin: 0 !important; padding: 0 !important; border: none !important;">
           +before_model_jump_to: list[JumpTo]
          </p>
         </span>
        </div>
       </foreignObject>
      </g>
      <g class="label" style="" transform="translate(0,60)">
       <foreignObject height="24" width="285.375">
        <div style="color: #202020 !important; font-family: Arial, Helvetica, sans-serif !important; font-size: 14px !important; background-color: transparent !important; visibility: visible !important; opacity: 1 !important; display: inline !important; margin: 0 !important; padding: 0 !important; border: none !important;" xmlns="http://www.w3.org/1999/xhtml">
         <span class="nodeLabel markdown-node-label" style="color: #202020 !important; font-family: Arial, Helvetica, sans-serif !important; font-size: 14px !important; background-color: transparent !important; visibility: visible !important; opacity: 1 !important; display: inline !important; margin: 0 !important; padding: 0 !important; border: none !important;">
          <p style="color: #202020 !important; font-family: Arial, Helvetica, sans-serif !important; font-size: 14px !important; background-color: transparent !important; visibility: visible !important; opacity: 1 !important; display: inline !important; margin: 0 !important; padding: 0 !important; border: none !important;">
           +after_model_jump_to: list[JumpTo]
          </p>
         </span>
        </div>
       </foreignObject>
      </g>
     </g>
     <g class="methods-group text" transform="translate(-235.69140625, 60)">
      <g class="label" style="" transform="translate(0,-12)">
       <foreignObject height="24" width="248.921875">
        <div style="color: #202020 !important; font-family: Arial, Helvetica, sans-serif !important; font-size: 14px !important; background-color: transparent !important; visibility: visible !important; opacity: 1 !important; display: inline !important; margin: 0 !important; padding: 0 !important; border: none !important;" xmlns="http://www.w3.org/1999/xhtml">
         <span class="nodeLabel markdown-node-label" style="color: #202020 !important; font-family: Arial, Helvetica, sans-serif !important; font-size: 14px !important; background-color: transparent !important; visibility: visible !important; opacity: 1 !important; display: inline !important; margin: 0 !important; padding: 0 !important; border: none !important;">
          <p style="color: #202020 !important; font-family: Arial, Helvetica, sans-serif !important; font-size: 14px !important; background-color: transparent !important; visibility: visible !important; opacity: 1 !important; display: inline !important; margin: 0 !important; padding: 0 !important; border: none !important;">
           +before_model(state, runtime)
          </p>
         </span>
        </div>
       </foreignObject>
      </g>
      <g class="label" style="" transform="translate(0,12)">
       <foreignObject height="24" width="392.03125">
        <div style="color: #202020 !important; font-family: Arial, Helvetica, sans-serif !important; font-size: 14px !important; background-color: transparent !important; visibility: visible !important; opacity: 1 !important; display: inline !important; margin: 0 !important; padding: 0 !important; border: none !important;" xmlns="http://www.w3.org/1999/xhtml">
         <span class="nodeLabel markdown-node-label" style="color: #202020 !important; font-family: Arial, Helvetica, sans-serif !important; font-size: 14px !important; background-color: transparent !important; visibility: visible !important; opacity: 1 !important; display: inline !important; margin: 0 !important; padding: 0 !important; border: none !important;">
          <p style="color: #202020 !important; font-family: Arial, Helvetica, sans-serif !important; font-size: 14px !important; background-color: transparent !important; visibility: visible !important; opacity: 1 !important; display: inline !important; margin: 0 !important; padding: 0 !important; border: none !important;">
           +modify_model_request(request, state, runtime)
          </p>
         </span>
        </div>
       </foreignObject>
      </g>
      <g class="label" style="" transform="translate(0,36)">
       <foreignObject height="24" width="235.28125">
        <div style="color: #202020 !important; font-family: Arial, Helvetica, sans-serif !important; font-size: 14px !important; background-color: transparent !important; visibility: visible !important; opacity: 1 !important; display: inline !important; margin: 0 !important; padding: 0 !important; border: none !important;" xmlns="http://www.w3.org/1999/xhtml">
         <span class="nodeLabel markdown-node-label" style="color: #202020 !important; font-family: Arial, Helvetica, sans-serif !important; font-size: 14px !important; background-color: transparent !important; visibility: visible !important; opacity: 1 !important; display: inline !important; margin: 0 !important; padding: 0 !important; border: none !important;">
          <p style="color: #202020 !important; font-family: Arial, Helvetica, sans-serif !important; font-size: 14px !important; background-color: transparent !important; visibility: visible !important; opacity: 1 !important; display: inline !important; margin: 0 !important; padding: 0 !important; border: none !important;">
           +after_model(state, runtime)
          </p>
         </span>
        </div>
       </foreignObject>
      </g>
     </g>
     <g class="divider" style="">
      <path d="M-247.69140625 -84 C-114.30659385547219 -84, 19.078218539055626 -84, 247.69140625 -84 M-247.69140625 -84 C-115.01397077219715 -84, 17.66346470560569 -84, 247.69140625 -84" fill="none" stroke="#dddddd" stroke-width="1.3" style=""/>
     </g>
     <g class="divider" style="">
      <path d="M-247.69140625 36 C-84.19690024804689 36, 79.29760575390623 36, 247.69140625 36 M-247.69140625 36 C-137.17020993963934 36, -26.64901362927864 36, 247.69140625 36" fill="none" stroke="#dddddd" stroke-width="1.3" style=""/>
     </g>
    </g>
    <g class="node default" id="classId-HumanInTheLoopMiddleware-1" transform="translate(224.6328125, 406)">
     <g class="basic label-container">
      <path d="M-216.6328125 -84 L216.6328125 -84 L216.6328125 84 L-216.6328125 84" fill="#ffffff" stroke="none" stroke-width="0" style=""/>
      <path d="M-216.6328125 -84 C-73.51777005365878 -84, 69.59727239268244 -84, 216.6328125 -84 M-216.6328125 -84 C-50.36713051138352 -84, 115.89855147723296 -84, 216.6328125 -84 M216.6328125 -84 C216.6328125 -23.676227356749635, 216.6328125 36.64754528650073, 216.6328125 84 M216.6328125 -84 C216.6328125 -17.360881356902667, 216.6328125 49.27823728619467, 216.6328125 84 M216.6328125 84 C44.21276702950627 84, -128.20727844098747 84, -216.6328125 84 M216.6328125 84 C77.06274968846932 84, -62.50731312306135 84, -216.6328125 84 M-216.6328125 84 C-216.6328125 42.295870617330586, -216.6328125 0.5917412346611712, -216.6328125 -84 M-216.6328125 84 C-216.6328125 37.76137137433259, -216.6328125 -8.47725725133482, -216.6328125 -84" fill="none" stroke="#dddddd" stroke-width="1.3" style=""/>
     </g>
     <g class="annotation-group text" transform="translate(0, -60)"/>
     <g class="label-group text" transform="translate(-131.375, -60)">
      <g class="label" style="font-weight: bolder" transform="translate(0,-12)">
       <foreignObject height="24" width="262.75">
        <div style="color: #202020 !important; font-family: Arial, Helvetica, sans-serif !important; font-size: 14px !important; background-color: transparent !important; visibility: visible !important; opacity: 1 !important; display: inline !important; margin: 0 !important; padding: 0 !important; border: none !important;" xmlns="http://www.w3.org/1999/xhtml">
         <span class="nodeLabel markdown-node-label" style="color: #202020 !important; font-family: Arial, Helvetica, sans-serif !important; font-size: 14px !important; background-color: transparent !important; visibility: visible !important; opacity: 1 !important; display: inline !important; margin: 0 !important; padding: 0 !important; border: none !important;">
          <p style="color: #202020 !important; font-family: Arial, Helvetica, sans-serif !important; font-size: 14px !important; background-color: transparent !important; visibility: visible !important; opacity: 1 !important; display: inline !important; margin: 0 !important; padding: 0 !important; border: none !important;">
           HumanInTheLoopMiddleware
          </p>
         </span>
        </div>
       </foreignObject>
      </g>
     </g>
     <g class="members-group text" transform="translate(-204.6328125, -12)">
      <g class="label" style="" transform="translate(0,-12)">
       <foreignObject height="24" width="277.890625">
        <div style="color: #202020 !important; font-family: Arial, Helvetica, sans-serif !important; font-size: 14px !important; background-color: transparent !important; visibility: visible !important; opacity: 1 !important; display: inline !important; margin: 0 !important; padding: 0 !important; border: none !important;" xmlns="http://www.w3.org/1999/xhtml">
         <span class="nodeLabel markdown-node-label" style="color: #202020 !important; font-family: Arial, Helvetica, sans-serif !important; font-size: 14px !important; background-color: transparent !important; visibility: visible !important; opacity: 1 !important; display: inline !important; margin: 0 !important; padding: 0 !important; border: none !important;">
          <p style="color: #202020 !important; font-family: Arial, Helvetica, sans-serif !important; font-size: 14px !important; background-color: transparent !important; visibility: visible !important; opacity: 1 !important; display: inline !important; margin: 0 !important; padding: 0 !important; border: none !important;">
           +interrupt_on: dict[str, ToolConfig]
          </p>
         </span>
        </div>
       </foreignObject>
      </g>
      <g class="label" style="" transform="translate(0,12)">
       <foreignObject height="24" width="187.8125">
        <div style="color: #202020 !important; font-family: Arial, Helvetica, sans-serif !important; font-size: 14px !important; background-color: transparent !important; visibility: visible !important; opacity: 1 !important; display: inline !important; margin: 0 !important; padding: 0 !important; border: none !important;" xmlns="http://www.w3.org/1999/xhtml">
         <span class="nodeLabel markdown-node-label" style="color: #202020 !important; font-family: Arial, Helvetica, sans-serif !important; font-size: 14px !important; background-color: transparent !important; visibility: visible !important; opacity: 1 !important; display: inline !important; margin: 0 !important; padding: 0 !important; border: none !important;">
          <p style="color: #202020 !important; font-family: Arial, Helvetica, sans-serif !important; font-size: 14px !important; background-color: transparent !important; visibility: visible !important; opacity: 1 !important; display: inline !important; margin: 0 !important; padding: 0 !important; border: none !important;">
           +description_prefix: str
          </p>
         </span>
        </div>
       </foreignObject>
      </g>
     </g>
     <g class="methods-group text" transform="translate(-204.6328125, 60)">
      <g class="label" style="" transform="translate(0,-12)">
       <foreignObject height="24" width="162.09375">
        <div style="color: #202020 !important; font-family: Arial, Helvetica, sans-serif !important; font-size: 14px !important; background-color: transparent !important; visibility: visible !important; opacity: 1 !important; display: inline !important; margin: 0 !important; padding: 0 !important; border: none !important;" xmlns="http://www.w3.org/1999/xhtml">
         <span class="nodeLabel markdown-node-label" style="color: #202020 !important; font-family: Arial, Helvetica, sans-serif !important; font-size: 14px !important; background-color: transparent !important; visibility: visible !important; opacity: 1 !important; display: inline !important; margin: 0 !important; padding: 0 !important; border: none !important;">
          <p style="color: #202020 !important; font-family: Arial, Helvetica, sans-serif !important; font-size: 14px !important; background-color: transparent !important; visibility: visible !important; opacity: 1 !important; display: inline !important; margin: 0 !important; padding: 0 !important; border: none !important;">
           +after_model(state)
          </p>
         </span>
        </div>
       </foreignObject>
      </g>
     </g>
     <g class="divider" style="">
      <path d="M-216.6328125 -36 C-116.48008275561573 -36, -16.32735301123145 -36, 216.6328125 -36 M-216.6328125 -36 C-46.69241984599401 -36, 123.24797280801198 -36, 216.6328125 -36" fill="none" stroke="#dddddd" stroke-width="1.3" style=""/>
     </g>
     <g class="divider" style="">
      <path d="M-216.6328125 36 C-122.21650892742667 36, -27.800205354853347 36, 216.6328125 36 M-216.6328125 36 C-97.21397783350862 36, 22.204856832982756 36, 216.6328125 36" fill="none" stroke="#dddddd" stroke-width="1.3" style=""/>
     </g>
    </g>
    <g class="node default" id="classId-SummarizationMiddleware-2" transform="translate(704.78125, 406)">
     <g class="basic label-container">
      <path d="M-213.515625 -84 L213.515625 -84 L213.515625 84 L-213.515625 84" fill="#ffffff" stroke="none" stroke-width="0" style=""/>
      <path d="M-213.515625 -84 C-78.78264882831624 -84, 55.95032734336752 -84, 213.515625 -84 M-213.515625 -84 C-110.12843463900563 -84, -6.741244278011266 -84, 213.515625 -84 M213.515625 -84 C213.515625 -34.21101096162792, 213.515625 15.57797807674416, 213.515625 84 M213.515625 -84 C213.515625 -36.03427261178474, 213.515625 11.931454776430513, 213.515625 84 M213.515625 84 C89.71256045027225 84, -34.0905040994555 84, -213.515625 84 M213.515625 84 C75.43609944286959 84, -62.64342611426082 84, -213.515625 84 M-213.515625 84 C-213.515625 48.9338171709295, -213.515625 13.867634341859002, -213.515625 -84 M-213.515625 84 C-213.515625 28.011421773247037, -213.515625 -27.977156453505927, -213.515625 -84" fill="none" stroke="#dddddd" stroke-width="1.3" style=""/>
     </g>
     <g class="annotation-group text" transform="translate(0, -60)"/>
     <g class="label-group text" transform="translate(-120.515625, -60)">
      <g class="label" style="font-weight: bolder" transform="translate(0,-12)">
       <foreignObject height="24" width="241.03125">
        <div style="color: #202020 !important; font-family: Arial, Helvetica, sans-serif !important; font-size: 14px !important; background-color: transparent !important; visibility: visible !important; opacity: 1 !important; display: inline !important; margin: 0 !important; padding: 0 !important; border: none !important;" xmlns="http://www.w3.org/1999/xhtml">
         <span class="nodeLabel markdown-node-label" style="color: #202020 !important; font-family: Arial, Helvetica, sans-serif !important; font-size: 14px !important; background-color: transparent !important; visibility: visible !important; opacity: 1 !important; display: inline !important; margin: 0 !important; padding: 0 !important; border: none !important;">
          <p style="color: #202020 !important; font-family: Arial, Helvetica, sans-serif !important; font-size: 14px !important; background-color: transparent !important; visibility: visible !important; opacity: 1 !important; display: inline !important; margin: 0 !important; padding: 0 !important; border: none !important;">
           SummarizationMiddleware
          </p>
         </span>
        </div>
       </foreignObject>
      </g>
     </g>
     <g class="members-group text" transform="translate(-201.515625, -12)">
      <g class="label" style="" transform="translate(0,-12)">
       <foreignObject height="24" width="198.09375">
        <div style="color: #202020 !important; font-family: Arial, Helvetica, sans-serif !important; font-size: 14px !important; background-color: transparent !important; visibility: visible !important; opacity: 1 !important; display: inline !important; margin: 0 !important; padding: 0 !important; border: none !important;" xmlns="http://www.w3.org/1999/xhtml">
         <span class="nodeLabel markdown-node-label" style="color: #202020 !important; font-family: Arial, Helvetica, sans-serif !important; font-size: 14px !important; background-color: transparent !important; visibility: visible !important; opacity: 1 !important; display: inline !important; margin: 0 !important; padding: 0 !important; border: none !important;">
          <p style="color: #202020 !important; font-family: Arial, Helvetica, sans-serif !important; font-size: 14px !important; background-color: transparent !important; visibility: visible !important; opacity: 1 !important; display: inline !important; margin: 0 !important; padding: 0 !important; border: none !important;">
           +model: BaseChatModel
          </p>
         </span>
        </div>
       </foreignObject>
      </g>
      <g class="label" style="" transform="translate(0,12)">
       <foreignObject height="24" width="282.515625">
        <div style="color: #202020 !important; font-family: Arial, Helvetica, sans-serif !important; font-size: 14px !important; background-color: transparent !important; visibility: visible !important; opacity: 1 !important; display: inline !important; margin: 0 !important; padding: 0 !important; border: none !important;" xmlns="http://www.w3.org/1999/xhtml">
         <span class="nodeLabel markdown-node-label" style="color: #202020 !important; font-family: Arial, Helvetica, sans-serif !important; font-size: 14px !important; background-color: transparent !important; visibility: visible !important; opacity: 1 !important; display: inline !important; margin: 0 !important; padding: 0 !important; border: none !important;">
          <p style="color: #202020 !important; font-family: Arial, Helvetica, sans-serif !important; font-size: 14px !important; background-color: transparent !important; visibility: visible !important; opacity: 1 !important; display: inline !important; margin: 0 !important; padding: 0 !important; border: none !important;">
           +max_tokens_before_summary: int
          </p>
         </span>
        </div>
       </foreignObject>
      </g>
     </g>
     <g class="methods-group text" transform="translate(-201.515625, 60)">
      <g class="label" style="" transform="translate(0,-12)">
       <foreignObject height="24" width="248.921875">
        <div style="color: #202020 !important; font-family: Arial, Helvetica, sans-serif !important; font-size: 14px !important; background-color: transparent !important; visibility: visible !important; opacity: 1 !important; display: inline !important; margin: 0 !important; padding: 0 !important; border: none !important;" xmlns="http://www.w3.org/1999/xhtml">
         <span class="nodeLabel markdown-node-label" style="color: #202020 !important; font-family: Arial, Helvetica, sans-serif !important; font-size: 14px !important; background-color: transparent !important; visibility: visible !important; opacity: 1 !important; display: inline !important; margin: 0 !important; padding: 0 !important; border: none !important;">
          <p style="color: #202020 !important; font-family: Arial, Helvetica, sans-serif !important; font-size: 14px !important; background-color: transparent !important; visibility: visible !important; opacity: 1 !important; display: inline !important; margin: 0 !important; padding: 0 !important; border: none !important;">
           +before_model(state, runtime)
          </p>
         </span>
        </div>
       </foreignObject>
      </g>
     </g>
     <g class="divider" style="">
      <path d="M-213.515625 -36 C-104.86878809914136 -36, 3.77804880171729 -36, 213.515625 -36 M-213.515625 -36 C-125.22391442567063 -36, -36.93220385134126 -36, 213.515625 -36" fill="none" stroke="#dddddd" stroke-width="1.3" style=""/>
     </g>
     <g class="divider" style="">
      <path d="M-213.515625 36 C-79.97569471676252 36, 53.56423556647496 36, 213.515625 36 M-213.515625 36 C-99.08941128896657 36, 15.336802422066853 36, 213.515625 36" fill="none" stroke="#dddddd" stroke-width="1.3" style=""/>
     </g>
    </g>
    <g class="node default" id="classId-AnthropicPromptCachingMiddleware-3" transform="translate(1222.53125, 406)">
     <g class="basic label-container">
      <path d="M-254.234375 -84 L254.234375 -84 L254.234375 84 L-254.234375 84" fill="#ffffff" stroke="none" stroke-width="0" style=""/>
      <path d="M-254.234375 -84 C-89.27062385409653 -84, 75.69312729180695 -84, 254.234375 -84 M-254.234375 -84 C-99.76362242854185 -84, 54.7071301429163 -84, 254.234375 -84 M254.234375 -84 C254.234375 -30.12920659200021, 254.234375 23.741586815999582, 254.234375 84 M254.234375 -84 C254.234375 -18.715848658174906, 254.234375 46.56830268365019, 254.234375 84 M254.234375 84 C126.04080952421728 84, -2.152755951565439 84, -254.234375 84 M254.234375 84 C126.82936195385724 84, -0.5756510922855114 84, -254.234375 84 M-254.234375 84 C-254.234375 46.40638614420584, -254.234375 8.81277228841168, -254.234375 -84 M-254.234375 84 C-254.234375 44.72209861325147, -254.234375 5.444197226502936, -254.234375 -84" fill="none" stroke="#dddddd" stroke-width="1.3" style=""/>
     </g>
     <g class="annotation-group text" transform="translate(0, -60)"/>
     <g class="label-group text" transform="translate(-165.609375, -60)">
      <g class="label" style="font-weight: bolder" transform="translate(0,-12)">
       <foreignObject height="24" width="331.21875">
        <div style="color: #202020 !important; font-family: Arial, Helvetica, sans-serif !important; font-size: 14px !important; background-color: transparent !important; visibility: visible !important; opacity: 1 !important; display: inline !important; margin: 0 !important; padding: 0 !important; border: none !important;" xmlns="http://www.w3.org/1999/xhtml">
         <span class="nodeLabel markdown-node-label" style="color: #202020 !important; font-family: Arial, Helvetica, sans-serif !important; font-size: 14px !important; background-color: transparent !important; visibility: visible !important; opacity: 1 !important; display: inline !important; margin: 0 !important; padding: 0 !important; border: none !important;">
          <p style="color: #202020 !important; font-family: Arial, Helvetica, sans-serif !important; font-size: 14px !important; background-color: transparent !important; visibility: visible !important; opacity: 1 !important; display: inline !important; margin: 0 !important; padding: 0 !important; border: none !important;">
           AnthropicPromptCachingMiddleware
          </p>
         </span>
        </div>
       </foreignObject>
      </g>
     </g>
     <g class="members-group text" transform="translate(-242.234375, -12)">
      <g class="label" style="" transform="translate(0,-12)">
       <foreignObject height="24" width="223.375">
        <div style="color: #202020 !important; font-family: Arial, Helvetica, sans-serif !important; font-size: 14px !important; background-color: transparent !important; visibility: visible !important; opacity: 1 !important; display: inline !important; margin: 0 !important; padding: 0 !important; border: none !important;" xmlns="http://www.w3.org/1999/xhtml">
         <span class="nodeLabel markdown-node-label" style="color: #202020 !important; font-family: Arial, Helvetica, sans-serif !important; font-size: 14px !important; background-color: transparent !important; visibility: visible !important; opacity: 1 !important; display: inline !important; margin: 0 !important; padding: 0 !important; border: none !important;">
          <p style="color: #202020 !important; font-family: Arial, Helvetica, sans-serif !important; font-size: 14px !important; background-color: transparent !important; visibility: visible !important; opacity: 1 !important; display: inline !important; margin: 0 !important; padding: 0 !important; border: none !important;">
           +type: Literal["ephemeral"]
          </p>
         </span>
        </div>
       </foreignObject>
      </g>
      <g class="label" style="" transform="translate(0,12)">
       <foreignObject height="24" width="189.359375">
        <div style="color: #202020 !important; font-family: Arial, Helvetica, sans-serif !important; font-size: 14px !important; background-color: transparent !important; visibility: visible !important; opacity: 1 !important; display: inline !important; margin: 0 !important; padding: 0 !important; border: none !important;" xmlns="http://www.w3.org/1999/xhtml">
         <span class="nodeLabel markdown-node-label" style="color: #202020 !important; font-family: Arial, Helvetica, sans-serif !important; font-size: 14px !important; background-color: transparent !important; visibility: visible !important; opacity: 1 !important; display: inline !important; margin: 0 !important; padding: 0 !important; border: none !important;">
          <p style="color: #202020 !important; font-family: Arial, Helvetica, sans-serif !important; font-size: 14px !important; background-color: transparent !important; visibility: visible !important; opacity: 1 !important; display: inline !important; margin: 0 !important; padding: 0 !important; border: none !important;">
           +ttl: Literal["5m", "1h"]
          </p>
         </span>
        </div>
       </foreignObject>
      </g>
     </g>
     <g class="methods-group text" transform="translate(-242.234375, 60)">
      <g class="label" style="" transform="translate(0,-12)">
       <foreignObject height="24" width="318.859375">
        <div style="color: #202020 !important; font-family: Arial, Helvetica, sans-serif !important; font-size: 14px !important; background-color: transparent !important; visibility: visible !important; opacity: 1 !important; display: inline !important; margin: 0 !important; padding: 0 !important; border: none !important;" xmlns="http://www.w3.org/1999/xhtml">
         <span class="nodeLabel markdown-node-label" style="color: #202020 !important; font-family: Arial, Helvetica, sans-serif !important; font-size: 14px !important; background-color: transparent !important; visibility: visible !important; opacity: 1 !important; display: inline !important; margin: 0 !important; padding: 0 !important; border: none !important;">
          <p style="color: #202020 !important; font-family: Arial, Helvetica, sans-serif !important; font-size: 14px !important; background-color: transparent !important; visibility: visible !important; opacity: 1 !important; display: inline !important; margin: 0 !important; padding: 0 !important; border: none !important;">
           +modify_model_request(request, state)
          </p>
         </span>
        </div>
       </foreignObject>
      </g>
     </g>
     <g class="divider" style="">
      <path d="M-254.234375 -36 C-63.866850307854946 -36, 126.50067438429011 -36, 254.234375 -36 M-254.234375 -36 C-113.71538600513745 -36, 26.803602989725107 -36, 254.234375 -36" fill="none" stroke="#dddddd" stroke-width="1.3" style=""/>
     </g>
     <g class="divider" style="">
      <path d="M-254.234375 36 C-98.7247561487631 36, 56.78486270247379 36, 254.234375 36 M-254.234375 36 C-134.56204504007633 36, -14.889715080152655 36, 254.234375 36" fill="none" stroke="#dddddd" stroke-width="1.3" style=""/>
     </g>
    </g>
   </g>
  </g>
 </g>
</svg>
